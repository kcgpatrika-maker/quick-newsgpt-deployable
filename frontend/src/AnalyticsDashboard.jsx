import React,{useEffect,useState} from 'react';import { BACKEND_URL } from './config';import { BarChart,Bar,XAxis,YAxis,Tooltip,CartesianGrid,ResponsiveContainer } from 'recharts';export default function AnalyticsDashboard(){const [data,setData]=useState([]);const [loading,setLoading]=useState(true);const fetchStats=async()=>{try{const res=await fetch(`${BACKEND_URL}/stats`);const raw=await res.json();const daily=Object.entries(raw||{}).map(([date,map])=>({date,count:Object.values(map).reduce((s,v)=>s+v,0)})).sort((a,b)=>a.date>b.date?1:-1);setData(daily);}catch(err){console.error(err);}finally{setLoading(false);}};useEffect(()=>{fetchStats();const id=setInterval(fetchStats,30000);return()=>clearInterval(id);},[]);const total=data.reduce((s,d)=>s+d.count,0);return(<div><div style={{marginBottom:8}}>Total clicks recorded: <strong>{total}</strong></div>{loading? <div>Loading...</div>:(data.length===0? <div>No data yet.</div>:<div style={{width:'100%',height:300}}><ResponsiveContainer width="100%" height="100%"><BarChart data={data}><CartesianGrid strokeDasharray="3 3"/><XAxis dataKey="date"/><YAxis/><Tooltip/><Bar dataKey="count" fill="#3B82F6" radius={[6,6,0,0]}/></BarChart></ResponsiveContainer></div>)} );}