import React,{useState} from 'react';import { BACKEND_URL } from './config';export default function GenerateLink(){const [targetUrl,setTargetUrl]=useState('');const [generatedLink,setGeneratedLink]=useState('');const [loading,setLoading]=useState(false);const [error,setError]=useState('');const handleGenerate=async()=>{if(!targetUrl.trim()){setError('Please enter a valid URL');return;}setError('');setLoading(true);try{const res=await fetch(`${BACKEND_URL}/create-link`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({target:targetUrl})});const data=await res.json();if(data.trackLink)setGeneratedLink(data.trackLink);else setError(data.error||'Failed to generate link');}catch{setError('Backend not reachable')}finally{setLoading(false)}};return(<div><input type="url" placeholder="https://example.com/news/..." style={{width:'100%',padding:10,borderRadius:8,border:'1px solid #ddd',marginBottom:8}} value={targetUrl} onChange={(e)=>setTargetUrl(e.target.value)}/><button onClick={handleGenerate} disabled={loading} style={{background:'#2563eb',color:'#fff',padding:'10px 14px',borderRadius:8,border:'none'}}>{loading?'Generating...':'Generate Tracking Link'}</button>{error&&<div style={{color:'red',marginTop:8}}>{error}</div>}{generatedLink&&(<div style={{marginTop:12}}><div style={{fontSize:13,color:'#333',marginBottom:6}}>Your Tracking Link (copy):</div><textarea rows={2} readOnly value={generatedLink} onFocus={(e)=>e.target.select()}/></div>)}</div>);}